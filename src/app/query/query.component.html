<ng-container *ngFor="let step of queryStepList; index as i; first as isFirst; last as isLast;">
  <mat-card>  
    <mat-card-title *ngIf="!isLast">Step {{i+1}}</mat-card-title>
    <mat-card-title *ngIf="isLast">Add a query step</mat-card-title>
    <mat-card-content>
      <query-select
        [queryStep]="step" [index]="i"
        (queryChanged)="onQueryChanged($event)"></query-select>
    </mat-card-content>      
    <mat-card-actions *ngIf="isLast">
      <button (click)="addQueryStep()">add step</button>
      <button (click)="removeQueryStep()">remove step</button>
      <button (click)="resetQuery()">reset query</button>
      <button (click)="showQueryUrl()">get query url</button>
    </mat-card-actions>
  </mat-card>
</ng-container>
<div class="spinner-container" *ngIf="queryService.loading$ | async">
  <mat-spinner></mat-spinner>
</div>
<query-result *ngIf="queryState?.results">
</query-result>
